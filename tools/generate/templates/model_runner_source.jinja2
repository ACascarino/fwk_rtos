// This is a TensorFlow Lite model runner interface that has been
// generated using the generate_model_runner tool.

#include "{{header_file}}"

#include "tensorflow/lite/micro/kernels/xcore/xcore_ops.h"

typedef tflite::MicroMutableOpResolver<{{builtin_operators|length + custom_operators|length}}> resolver_t;

static resolver_t resolver_s;
static resolver_t *resolver = nullptr;

ModelRunnerStatus {{name}}_model_runner_create(model_runner_t *ctx, const uint8_t* model_content)
{
  // Set up op resolver
  //   This pulls in all the operation implementations we need.
  if (resolver == nullptr) {
    resolver = &resolver_s;
    {%- for builtin_operator in builtin_operators %}
    resolver->Add{{builtin_operator}}();
    {%- endfor %}
    {%- for custom_operator in custom_operators %}
    resolver->AddCustom(tflite::ops::micro::xcore::{{custom_operator[0]}}, tflite::ops::micro::xcore::{{custom_operator[1]}}());
    {%- endfor %}
    {%- for unknown_operator in unknown_operators %}
    // Unable to generate registration code for {{unknown_operator}}
    {%- endfor %}
  }

  return model_runner_create(ctx, static_cast<void *>(resolver), model_content);
}
